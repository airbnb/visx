"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[5444],{89:(t,e,n)=>{n.d(e,{A:()=>a});var i=n(32988),r=n.n(i),s=n(6029);function a(t){let{className:e,innerRef:n,...i}=t;return(0,s.jsx)("rect",{ref:n,className:r()("visx-bar",e),...i})}},18268:(t,e,n)=>{n.d(e,{WB:()=>U,Tp:()=>R,Ay:()=>F});var i=n(6029),r=n(55729),s=n(13365),a=n(69077),o=n(1347),h=n(32602),l=n(98752);function d(t,e){if("invert"in t&&void 0!==t.invert)return t.invert(e).valueOf();let[n,i]=t.range(),r=0,s=("step"in t&&void 0!==t.step?t.step():1)*(i-n)/Math.abs(i-n);if(s>0)for(;e>n+s*(r+1);)r+=1;else for(;e<n+s*(r+1);)r+=1;return r}function u(t,e,n,i){let r,s=d(t,e+(e<n?-i:i)),a=d(t,n+(n<e?-i:i)),o=Math.min(s,a),h=Math.max(s,a);if("invert"in t&&void 0!==t.invert)r={start:o,end:h};else{let e=[],n=t.domain();for(let t=o;t<=h;t+=1)e.push(n[t]);r={values:e}}return r}function x(t){return window.TouchEvent&&t instanceof TouchEvent?{pageX:t.touches[0].pageX,pageY:t.touches[0].pageY}:{pageX:t.pageX,pageY:t.pageY}}class g extends r.Component{render(){let{stageWidth:t,stageHeight:e,brush:n,type:r,handle:s,isControlled:a,isDragInProgress:o,renderBrushHandle:h}=this.props,{x:d,y:u,width:x,height:g}=s,y="right"===r||"left"===r?"ew-resize":"ns-resize";return(0,i.jsx)(l.A,{width:t,height:e,onDragStart:this.handleDragStart,onDragMove:this.handleDragMove,onDragEnd:this.handleDragEnd,resetOnStart:!0,isDragging:a?o:void 0,children:s=>{let{dragStart:o,dragEnd:l,dragMove:c,isDragging:m}=s;return(0,i.jsxs)("g",{children:[m&&(0,i.jsx)("rect",{fill:"transparent",width:t,height:e,style:{cursor:y},onPointerMove:c,onPointerUp:a?void 0:l,onPointerLeave:a?void 0:l}),!h&&(0,i.jsx)("rect",{x:d,y:u,width:x,height:g,fill:"transparent",className:"visx-brush-handle-".concat(r),onPointerDown:o,onPointerMove:c,onPointerUp:a?void 0:l,style:{cursor:y,pointerEvents:n.activeHandle||n.isBrushing?"none":"all"}}),h&&(0,i.jsx)("g",{onPointerDown:o,onPointerMove:c,onPointerUp:a?void 0:l,children:h({...this.props.handle,height:e,className:"visx-brush-handle-".concat(r),isBrushActive:-1!==n.extent.x0&&-1!==n.extent.x1})})]})}})}constructor(...t){super(...t),this.handleDragStart=t=>{let{onBrushHandleChange:e,type:n,onBrushStart:i}=this.props;e&&e(n,x(t.event)),i&&i(t)},this.handleDragMove=t=>{let{updateBrush:e,type:n,isControlled:i}=this.props;t.isDragging&&!i&&e(e=>{let{start:i,end:r}=e,s=0,a=Math.max(i.x,r.x),o=Math.min(i.x,r.x),h=Math.max(i.y,r.y),l=Math.min(i.y,r.y);switch(n){case"right":return s=a+t.dx,{...e,activeHandle:n,extent:{...e.extent,x0:Math.max(Math.min(s,i.x),e.bounds.x0),x1:Math.min(Math.max(s,i.x),e.bounds.x1)}};case"left":return s=o+t.dx,{...e,activeHandle:n,extent:{...e.extent,x0:Math.min(s,r.x),x1:Math.max(s,r.x)}};case"bottom":return s=h+t.dy,{...e,activeHandle:n,extent:{...e.extent,y0:Math.min(s,i.y),y1:Math.max(s,i.y)}};case"top":return s=l+t.dy,{...e,activeHandle:n,extent:{...e.extent,y0:Math.min(s,r.y),y1:Math.max(s,r.y)}};default:return e}})},this.handleDragEnd=()=>{let{updateBrush:t,onBrushEnd:e,onBrushHandleChange:n,isControlled:i}=this.props;i||t(t=>{let{start:n,end:i,extent:r}=t;n.x=Math.min(r.x0,r.x1),n.y=Math.min(r.y0,r.y0),i.x=Math.max(r.x0,r.x1),i.y=Math.max(r.y0,r.y1);let s={...t,start:n,end:i,activeHandle:null,isBrushing:!1,extent:{x0:Math.min(n.x,i.x),x1:Math.max(n.x,i.x),y0:Math.min(n.y,i.y),y1:Math.max(n.y,i.y)}};return e&&e(s),s}),n&&n()}}}class y extends r.Component{render(){let{type:t,brush:e,stageWidth:n,stageHeight:r,style:s,corner:a}=this.props,o=(null==s?void 0:s.cursor)||("topLeft"===t||"bottomRight"===t?"nwse-resize":"nesw-resize"),h=e.activeHandle||e.isBrushing?"none":"all";return(0,i.jsx)(l.A,{width:n,height:r,onDragMove:this.cornerDragMove,onDragEnd:this.cornerDragEnd,resetOnStart:!0,children:e=>{let{dragMove:l,dragEnd:d,dragStart:u,isDragging:x}=e;return(0,i.jsxs)("g",{children:[x&&(0,i.jsx)("rect",{fill:"transparent",width:n,height:r,style:{cursor:o},onPointerMove:l,onPointerUp:d}),(0,i.jsx)("rect",{fill:"transparent",onPointerDown:u,onPointerMove:l,onPointerUp:d,className:"visx-brush-corner-".concat(t),style:{cursor:o,pointerEvents:h,...s},...a})]})}})}constructor(...t){super(...t),this.cornerDragMove=t=>{let{updateBrush:e,type:n}=this.props;t.isDragging&&e(e=>{let{start:i,end:r}=e,s=Math.max(i.x,r.x),a=Math.min(i.x,r.x),o=Math.max(i.y,r.y),h=Math.min(i.y,r.y),l=0,d=0;switch(n){case"topRight":return l=s+t.dx,d=h+t.dy,{...e,activeHandle:n,extent:{...e.extent,x0:Math.max(Math.min(l,i.x),e.bounds.x0),x1:Math.min(Math.max(l,i.x),e.bounds.x1),y0:Math.max(Math.min(d,r.y),e.bounds.y0),y1:Math.min(Math.max(d,r.y),e.bounds.y1)}};case"topLeft":return l=a+t.dx,d=h+t.dy,{...e,activeHandle:n,extent:{...e.extent,x0:Math.max(Math.min(l,r.x),e.bounds.x0),x1:Math.min(Math.max(l,r.x),e.bounds.x1),y0:Math.max(Math.min(d,r.y),e.bounds.y0),y1:Math.min(Math.max(d,r.y),e.bounds.y1)}};case"bottomLeft":return l=a+t.dx,d=o+t.dy,{...e,activeHandle:n,extent:{...e.extent,x0:Math.max(Math.min(l,r.x),e.bounds.x0),x1:Math.min(Math.max(l,r.x),e.bounds.x1),y0:Math.max(Math.min(d,i.y),e.bounds.y0),y1:Math.min(Math.max(d,i.y),e.bounds.y1)}};case"bottomRight":return l=s+t.dx,d=o+t.dy,{...e,activeHandle:n,extent:{...e.extent,x0:Math.max(Math.min(l,i.x),e.bounds.x0),x1:Math.min(Math.max(l,i.x),e.bounds.x1),y0:Math.max(Math.min(d,i.y),e.bounds.y0),y1:Math.min(Math.max(d,i.y),e.bounds.y1)}};default:return e}})},this.cornerDragEnd=()=>{let{updateBrush:t,onBrushEnd:e}=this.props;t(t=>{let{start:n,end:i,extent:r}=t;n.x=Math.min(r.x0,r.x1),n.y=Math.min(r.y0,r.y0),i.x=Math.max(r.x0,r.x1),i.y=Math.max(r.y0,r.y1);let s={...t,start:n,end:i,activeHandle:null,domain:{x0:Math.min(n.x,i.x),x1:Math.max(n.x,i.x),y0:Math.min(n.y,i.y),y1:Math.max(n.y,i.y)}};return e&&e(s),s})}}}y.defaultProps={style:{}};let c={cursor:"move"};class m extends r.Component{render(){let{width:t,height:e,stageWidth:n,stageHeight:r,brush:s,disableDraggingSelection:a,onMouseLeave:o,onMouseMove:h,onMouseUp:d,onClick:u,selectedBoxStyle:x,isControlled:g,isDragInProgress:y}=this.props;return(0,i.jsx)(l.A,{width:t,height:e,resetOnStart:!0,onDragStart:this.selectionDragStart,onDragMove:this.selectionDragMove,onDragEnd:this.selectionDragEnd,isDragging:g?y:void 0,children:l=>{let{isDragging:y,dragStart:m,dragEnd:p,dragMove:v}=l;return(0,i.jsxs)("g",{children:[y&&(0,i.jsx)("rect",{width:n,height:r,fill:"transparent",onPointerUp:g?void 0:p,onPointerMove:v,onPointerLeave:g?void 0:p,style:c}),(0,i.jsx)("rect",{x:Math.min(s.extent.x0,s.extent.x1),y:Math.min(s.extent.y0,s.extent.y1),width:t,height:e,className:"visx-brush-selection",onPointerDown:a?void 0:m,onPointerLeave:t=>{o&&o(t)},onPointerMove:t=>{v(t),h&&h(t)},onPointerUp:t=>{g||p(t),d&&d(t)},onClick:t=>{u&&u(t)},style:{pointerEvents:s.isBrushing||s.activeHandle?"none":"all",cursor:a?void 0:"move"},...x})]})}})}constructor(...t){super(...t),this.selectionDragStart=t=>{let{onMoveSelectionChange:e,onBrushStart:n}=this.props;e&&e("move",x(t.event)),n&&n(t)},this.selectionDragMove=t=>{let{updateBrush:e,isControlled:n}=this.props;n||e(e=>{let{x:n,y:i}=e.start,{x:r,y:s}=e.end,a=t.dx>0?Math.min(t.dx,e.bounds.x1-r):Math.max(t.dx,e.bounds.x0-n),o=t.dy>0?Math.min(t.dy,e.bounds.y1-s):Math.max(t.dy,e.bounds.y0-i);return{...e,isBrushing:!0,extent:{...e.extent,x0:n+a,x1:r+a,y0:i+o,y1:s+o}}})},this.selectionDragEnd=()=>{let{updateBrush:t,onBrushEnd:e,onMoveSelectionChange:n,isControlled:i}=this.props;i||t(t=>{let n={...t,isBrushing:!1,start:{...t.start,x:Math.min(t.extent.x0,t.extent.x1),y:Math.min(t.extent.y0,t.extent.y1)},end:{...t.end,x:Math.max(t.extent.x0,t.extent.x1),y:Math.max(t.extent.y0,t.extent.y1)}};return e&&e(n),n}),n&&n()}}}m.defaultProps={onMouseLeave:null,onMouseUp:null,onMouseMove:null,onClick:null};var p=n(89);function v(t){return(0,i.jsx)(p.A,{className:"visx-brush-overlay",fill:"transparent",x:0,y:0,...t})}class M extends r.Component{componentDidUpdate(t){(this.props.width!==t.width||this.props.height!==t.height)&&this.setState(e=>{let{start:n,end:i,extent:r}=e;if(-1!==r.x0||-1!==r.x1||-1!==r.y0||-1!==r.y1){let e=this.props.width/t.width,s=this.props.height/t.height;n={x:e*r.x0,y:s*r.y0},i={x:e*r.x1,y:s*r.y1},r=this.getExtent(n,i)}return{start:n,end:i,extent:r,bounds:{x0:0,x1:this.props.width,y0:0,y1:this.props.height}}})}componentDidMount(){this.props.useWindowMoveEvents&&(window.addEventListener("mouseup",this.handleWindowPointerUp),window.addEventListener("mousemove",this.debouncedHandleWindowPointerMove))}componentWillUnmount(){this.props.useWindowMoveEvents&&(window.removeEventListener("mouseup",this.handleWindowPointerUp),window.removeEventListener("mousemove",this.debouncedHandleWindowPointerMove))}render(){let{start:t,end:e}=this.state,{top:n,left:r,width:s,height:a,onMouseLeave:o,onMouseUp:d,onMouseMove:u,onBrushEnd:x,onClick:c,resizeTriggerAreas:p,selectedBoxStyle:M,disableDraggingSelection:f,disableDraggingOverlay:b,clickSensitivity:w,useWindowMoveEvents:D,renderBrushHandle:B}=this.props,{brushingType:A}=this.state,S=this.handles(),P=this.corners(),E=this.getBrushWidth(),k=this.getBrushHeight(),j=new Set(p);return(0,i.jsxs)(h.A,{className:"visx-brush",top:n,left:r,children:[b?(0,i.jsx)(v,{width:s,height:a,onClick:t=>{let e=this.mouseUpTime-this.mouseDownTime;c&&e<w&&c(t)},style:{cursor:"default"}}):(0,i.jsx)(l.A,{width:s,height:a,resetOnStart:!0,onDragStart:this.handleDragStart,onDragMove:this.handleDragMove,onDragEnd:this.handleDragEnd,isDragging:D?"select"===A:void 0,children:t=>{let{dragStart:e,isDragging:n,dragMove:r,dragEnd:h}=t;return(0,i.jsx)(v,{width:s,height:a,onDoubleClick:()=>this.reset(),onClick:t=>{let e=this.mouseUpTime-this.mouseDownTime;c&&e<w&&c(t)},onPointerDown:t=>{this.mouseDownTime=Date.now(),e(t)},onPointerLeave:t=>{o&&o(t)},onPointerMove:t=>{!n&&u&&u(t),n&&r(t)},onPointerUp:t=>{this.mouseUpTime=Date.now(),d&&d(t),h(t)},style:{cursor:"crosshair"}})}}),t&&e&&(0,i.jsx)(m,{updateBrush:this.updateBrush,width:E,height:k,stageWidth:s,stageHeight:a,brush:this.state,disableDraggingSelection:f,onBrushEnd:x,onBrushStart:this.handleBrushStart,onMouseLeave:o,onMouseMove:u,onMouseUp:d,onMoveSelectionChange:this.handleBrushingTypeChange,onClick:c,selectedBoxStyle:M,isControlled:D,isDragInProgress:D?"move"===A:void 0}),t&&e&&Object.keys(S).filter(t=>j.has(t)).map(t=>{let e=S[t];return e&&(0,i.jsx)(g,{type:t,handle:e,stageWidth:s,stageHeight:a,updateBrush:this.updateBrush,brush:this.state,onBrushStart:this.handleBrushStart,onBrushEnd:x,isControlled:D,isDragInProgress:D?A===t:void 0,onBrushHandleChange:this.handleBrushingTypeChange,renderBrushHandle:B},"handle-".concat(t))}),t&&e&&Object.keys(P).filter(t=>j.has(t)).map(t=>{let e=P[t];return e&&(0,i.jsx)(y,{type:t,brush:this.state,updateBrush:this.updateBrush,stageWidth:s,stageHeight:a,corner:e,onBrushEnd:x},"corner-".concat(t))})]})}constructor(t){super(t),this.mouseUpTime=0,this.mouseDownTime=0,this.getIdleState=()=>{let{width:t,height:e}=this.props;return{start:{x:0,y:0},end:{x:0,y:0},extent:{x0:-1,x1:-1,y0:-1,y1:-1},bounds:{x0:0,x1:t,y0:0,y1:e},isBrushing:!1,brushPageOffset:void 0,activeHandle:null,brushingType:void 0}},this.handleWindowPointerUp=()=>{let{useWindowMoveEvents:t,onBrushEnd:e,resetOnEnd:n}=this.props,{brushingType:i}=this.state;t&&i&&this.updateBrush(t=>{let{start:i,end:r,extent:s}=t;i.x=Math.min(s.x0,s.x1),i.y=Math.min(s.y0,s.y0),r.x=Math.max(s.x0,s.x1),r.y=Math.max(s.y0,s.y1);let a={...t,activeHandle:null,isBrushing:!1,brushingType:void 0};return e&&e(a),n&&(a={...a,...this.getIdleState()}),a})},this.handleWindowPointerMove=t=>{let{useWindowMoveEvents:e}=this.props,{brushingType:n,isBrushing:i,brushPageOffset:r,start:s}=this.state;if(!e||!i)return;let a=t.pageX-((null==r?void 0:r.pageX)||0),o=t.pageY-((null==r?void 0:r.pageY)||0);["left","right","top","bottom"].includes(null!=n?n:"")&&this.updateBrush(t=>{let{x:e,y:i}=t.start,{x:r,y:s}=t.end;return{...t,isBrushing:!0,extent:{...t.extent,...this.getExtent({x:"left"===n?Math.min(Math.max(e+a,t.bounds.x0),t.bounds.x1):e,y:"top"===n?Math.min(Math.max(i+o,t.bounds.y0),t.bounds.y1):i},{x:"right"===n?Math.min(Math.max(r+a,t.bounds.x0),t.bounds.x1):r,y:"bottom"===n?Math.min(Math.max(s+o,t.bounds.y0),t.bounds.y1):s})}}}),"move"===n&&this.updateBrush(t=>{let{x:e,y:n}=t.start,{x:i,y:r}=t.end,s=a>0?Math.min(a,t.bounds.x1-i):Math.max(a,t.bounds.x0-e),h=o>0?Math.min(o,t.bounds.y1-r):Math.max(o,t.bounds.y0-n);return{...t,isBrushing:!0,extent:{...t.extent,x0:e+s,y0:n+h,x1:i+s,y1:r+h}}}),"select"===n&&this.updateBrush(t=>{let{x:e,y:n}=t.start,i={x:Math.min(Math.max(e+a,t.bounds.x0),t.bounds.x1),y:Math.min(Math.max(n+o,t.bounds.y0),t.bounds.y1)},r=this.getExtent(s,i);return{...t,end:i,extent:r}})},this.debouncedHandleWindowPointerMove=function(t,e){let n;return function(){for(var i=arguments.length,r=Array(i),s=0;s<i;s++)r[s]=arguments[s];clearTimeout(n),n=setTimeout(()=>{t.apply(this,r)},e)}}(this.handleWindowPointerMove,1),this.getExtent=(t,e)=>{let{brushDirection:n,width:i,height:r}=this.props,s="vertical"===n?0:Math.min(t.x||0,e.x||0),a="vertical"===n?i:Math.max(t.x||0,e.x||0);return{x0:s,x1:a,y0:"horizontal"===n?0:Math.min(t.y||0,e.y||0),y1:"horizontal"===n?r:Math.max(t.y||0,e.y||0)}},this.handleDragStart=t=>{let{onBrushStart:e,left:n,top:i,inheritedMargin:r,useWindowMoveEvents:s}=this.props,a=(null==r?void 0:r.left)?r.left:0,o=(null==r?void 0:r.top)?r.top:0,h={x:(t.x||0)+t.dx-n-a,y:(t.y||0)+t.dy-i-o},l={...h};e&&e(h),this.updateBrush(e=>({...e,start:h,end:l,extent:{x0:-1,x1:-1,y0:-1,y1:-1},isBrushing:!0,brushingType:"select",brushPageOffset:s?x(t.event):void 0}))},this.handleBrushStart=t=>{let{onBrushStart:e,left:n,top:i,inheritedMargin:r}=this.props;if(e){let s=(null==r?void 0:r.left)?r.left:0,a=(null==r?void 0:r.top)?r.top:0;e({x:(t.x||0)+t.dx-n-s,y:(t.y||0)+t.dy-i-a})}},this.handleDragMove=t=>{let{left:e,top:n,inheritedMargin:i,useWindowMoveEvents:r}=this.props;if(!t.isDragging||r)return;let s=(null==i?void 0:i.left)||0,a=(null==i?void 0:i.top)||0,o={x:(t.x||0)+t.dx-e-s,y:(t.y||0)+t.dy-n-a};this.updateBrush(t=>{let{start:e}=t,n=this.getExtent(e,o);return{...t,end:o,extent:n}})},this.handleDragEnd=()=>{let{onBrushEnd:t,resetOnEnd:e,useWindowMoveEvents:n}=this.props;n||this.updateBrush(n=>{let{extent:i}=n,r={...n,start:{x:i.x0,y:i.y0},end:{x:i.x1,y:i.y1},isBrushing:!1,brushingType:void 0,activeHandle:null};return t&&t(r),e&&(r={...r,...this.getIdleState()}),r})},this.getBrushWidth=()=>{let{extent:t}=this.state,{x0:e,x1:n}=t;return Math.max(Math.max(e,n)-Math.min(e,n),0)},this.getBrushHeight=()=>{let{extent:t}=this.state,{y1:e,y0:n}=t;return Math.max(Math.max(n,e)-Math.min(n,e),0)},this.handles=()=>{let{handleSize:t}=this.props,{extent:e}=this.state,{x0:n,x1:i,y0:r,y1:s}=e,a=t/2,o=this.getBrushWidth(),h=this.getBrushHeight();return{top:{x:n-a,y:r-a,height:t,width:o+t},bottom:{x:n-a,y:s-a,height:t,width:o+t},right:{x:i-a,y:r-a,height:h+t,width:t},left:{x:n-a,y:r-a,height:h+t,width:t}}},this.corners=()=>{let{handleSize:t}=this.props,{extent:e}=this.state,{x0:n,x1:i,y0:r,y1:s}=e,a=t/2;return{topLeft:{x:Math.min(n,i)-a,y:Math.min(r,s)-a,width:t,height:t},topRight:{x:Math.max(n,i)-a,y:Math.min(r,s)-a,width:t,height:t},bottomLeft:{x:Math.min(n,i)-a,y:Math.max(r,s)-a,width:t,height:t},bottomRight:{x:Math.max(n,i)-a,y:Math.max(r,s)-a,width:t,height:t}}},this.updateBrush=t=>{let{onChange:e}=this.props;this.setState(t,()=>{e&&e(this.state)})},this.reset=()=>this.updateBrush(()=>this.getIdleState()),this.handleBrushingTypeChange=(t,e)=>{this.updateBrush(n=>{let i={...n,brushingType:t,isBrushing:void 0!==t};return(e||void 0===t)&&(i.brushPageOffset=e),i})};let{initialBrushPosition:e}=t,n=e?this.getExtent(e.start,e.end):{x0:-1,x1:-1,y0:-1,y1:-1};this.state={start:{x:Math.max(0,n.x0),y:Math.max(0,n.y0)},end:{x:Math.max(0,n.x1),y:Math.max(0,n.y1)},extent:n,bounds:{x0:0,x1:this.props.width,y0:0,y1:this.props.height},isBrushing:!1,brushingType:void 0,activeHandle:null}}}M.defaultProps={brushDirection:"both",inheritedMargin:{left:0,top:0,right:0,bottom:0},onChange:null,handleSize:4,resizeTriggerAreas:["left","right"],onBrushStart:null,onBrushEnd:null,onMouseLeave:null,onMouseUp:null,onMouseMove:null,onClick:null,disableDraggingSelection:!1,disableDraggingOverlay:!1,clickSensitivity:200,resetOnEnd:!1,initialBrushPosition:null,useWindowMoveEvents:!1,renderBrushHandles:null};let f="steelblue";class b extends r.Component{convertRangeToDomain(t){let{xScale:e,yScale:n}=this.props,{x0:i,x1:r,y0:s,y1:a}=t.extent,o=u(e,i||0,r||0,2),h=u(n,s||0,a||0,2);return{x0:o.start||0,x1:o.end||0,xValues:o.values,y0:h.start||0,y1:h.end||0,yValues:h.values}}render(){let t,e,n,r,{xScale:s,yScale:a,height:o,width:h,margin:l,brushDirection:d,initialBrushPosition:u,innerRef:x,resizeTriggerAreas:g,brushRegion:y,yAxisOrientation:c,xAxisOrientation:m,selectedBoxStyle:p,disableDraggingSelection:v,disableDraggingOverlay:f,resetOnEnd:b,onMouseLeave:w,onMouseMove:D,onClick:B,handleSize:A,useWindowMoveEvents:S,renderBrushHandle:P}=this.props;if(!s||!a)return null;let E=(null==l?void 0:l.left)?l.left:0,k=(null==l?void 0:l.top)?l.top:0,j=(null==l?void 0:l.right)?l.right:0,C=(null==l?void 0:l.bottom)?l.bottom:0;return"chart"===y?(n=0,r=0,t=h,e=o):"yAxis"===y?(r=0,e=o,"right"===c?(n=h,t=j):(n=-E,t=E)):(n=0,t=h,"bottom"===m?(r=o,e=C):(r=-k,e=k)),(0,i.jsx)(M,{width:t,height:e,left:n,top:r,brushDirection:d,disableDraggingSelection:v,disableDraggingOverlay:f,handleSize:A,inheritedMargin:l,initialBrushPosition:u,ref:x,resetOnEnd:b,resizeTriggerAreas:g,selectedBoxStyle:p,onBrushEnd:this.handleBrushEnd,onBrushStart:this.handleBrushStart,onChange:this.handleChange,onClick:B,onMouseLeave:w,onMouseMove:D,useWindowMoveEvents:S,renderBrushHandle:P})}constructor(...t){super(...t),this.handleChange=t=>{let{onChange:e}=this.props;if(!e)return;let{x0:n}=t.extent;if(void 0===n||n<0)return void e(null);e(this.convertRangeToDomain(t))},this.handleBrushStart=t=>{let{onBrushStart:e}=this.props;if(!e)return;let{x:n,y:i}=t,{xScale:r,yScale:s}=this.props,a=d(r,n),o=d(s,i);e({x:"invert"in r&&void 0!==r.invert?a:r.domain()[a],y:"invert"in s&&void 0!==s.invert?o:s.domain()[o]})},this.handleBrushEnd=t=>{let{onBrushEnd:e}=this.props;if(!e)return;let{x0:n}=t.extent;if(void 0===n||n<0)return void e(null);e(this.convertRangeToDomain(t))}}}b.defaultProps={xScale:null,yScale:null,onChange:null,height:0,width:0,selectedBoxStyle:{fill:f,fillOpacity:.2,stroke:f,strokeWidth:1,strokeOpacity:.8},margin:{top:0,left:0,right:0,bottom:0},handleSize:4,brushDirection:"horizontal",initialBrushPosition:null,resizeTriggerAreas:["left","right"],brushRegion:"chart",yAxisOrientation:"right",xAxisOrientation:"bottom",onBrushStart:null,onBrushEnd:null,disableDraggingSelection:!1,resetOnEnd:!1,onMouseMove:null,onMouseLeave:null,onClick:null,useWindowMoveEvents:!1,renderBrushHandles:null};var w=n(1868),D=n(82607),B=n(87665),A=n(18769),S=n(42481),P=n(83249),E=n(64255),k=n(93714);let j="#fff",C={textAnchor:"middle",fontFamily:"Arial",fontSize:10,fill:j},T={dx:"-0.25em",dy:"0.25em",fontFamily:"Arial",fontSize:10,textAnchor:"end",fill:j};function L(t){let{data:e,gradientColor:n,width:r,yMax:s,margin:a,xScale:o,yScale:l,hideBottomAxis:d=!1,hideLeftAxis:u=!1,top:x,left:g,children:y}=t;return r<10?null:(0,i.jsxs)(h.A,{left:g||a.left,top:x||a.top,children:[(0,i.jsx)(D.A,{id:"gradient",from:n,fromOpacity:1,to:n,toOpacity:.2}),(0,i.jsx)(S.A,{data:e,x:t=>o(new Date(t.date))||0,y:t=>l(t.close)||0,yScale:l,strokeWidth:1,stroke:"url(#gradient)",fill:"url(#gradient)",curve:k.G}),!d&&(0,i.jsx)(P.A,{top:s,scale:o,numTicks:r>520?10:5,stroke:j,tickStroke:j,tickLabelProps:C}),!u&&(0,i.jsx)(E.A,{scale:l,numTicks:5,stroke:j,tickStroke:j,tickLabelProps:T}),y]})}let H=o.A.slice(1e3),W={top:10,bottom:15,left:50,right:20},O="brush_pattern",z="brush_gradient",U="#f6acc8",R="#584153",N="#af8baf",I={fill:"url(#".concat(O,")"),stroke:"white"},X=t=>new Date(t.date),Y=t=>t.close;function _(t){let{x:e,height:n,isBrushActive:r}=t;return r?(0,i.jsx)(h.A,{left:e+4,top:(n-15)/2,children:(0,i.jsx)("path",{fill:"#f2f2f2",d:"M -4.5 0.5 L 3.5 0.5 L 3.5 15.5 L -4.5 15.5 L -4.5 0.5 M -1.5 4 L -1.5 12 M 0.5 4 L 0.5 12",stroke:"#999999",strokeWidth:"1",style:{cursor:"ew-resize"}})}):null}let F=function(t){let{compact:e=!1,width:n,height:o,margin:h={top:20,left:50,bottom:20,right:20}}=t,l=(0,r.useRef)(null),[d,u]=(0,r.useState)(H),x=o-h.top-h.bottom,g=e?15:40,y=.8*x-g,c=x-y-30,m=Math.max(n-h.left-h.right,0),p=Math.max(y,0),v=Math.max(n-W.left-W.right,0),M=Math.max(c-W.top-W.bottom,0),f=(0,r.useMemo)(()=>(0,s.A)({range:[0,m],domain:(0,B.A)(d,X)}),[m,d]),S=(0,r.useMemo)(()=>(0,a.A)({range:[p,0],domain:[0,(0,A.A)(d,Y)||0],nice:!0}),[p,d]),P=(0,r.useMemo)(()=>(0,s.A)({range:[0,v],domain:(0,B.A)(H,X)}),[v]),E=(0,r.useMemo)(()=>(0,a.A)({range:[M,0],domain:[0,(0,A.A)(H,Y)||0],nice:!0}),[M]),k=(0,r.useMemo)(()=>({start:{x:P(X(H[50]))},end:{x:P(X(H[100]))}}),[P]);return(0,i.jsxs)("div",{children:[(0,i.jsxs)("svg",{width:n,height:o,children:[(0,i.jsx)(D.A,{id:z,from:R,to:N,rotate:45}),(0,i.jsx)("rect",{x:0,y:0,width:n,height:o,fill:"url(#".concat(z,")"),rx:14}),(0,i.jsx)(L,{hideBottomAxis:e,data:d,width:n,margin:{...h,bottom:g},yMax:p,xScale:f,yScale:S,gradientColor:N}),(0,i.jsxs)(L,{hideBottomAxis:!0,hideLeftAxis:!0,data:H,width:n,yMax:M,xScale:P,yScale:E,margin:W,top:y+g+h.top,gradientColor:N,children:[(0,i.jsx)(w.A,{id:O,height:8,width:8,stroke:U,strokeWidth:1,orientation:["diagonal"]}),(0,i.jsx)(b,{xScale:P,yScale:E,width:v,height:M,margin:W,handleSize:8,innerRef:l,resizeTriggerAreas:["left","right"],brushDirection:"horizontal",initialBrushPosition:k,onChange:t=>{if(!t)return;let{x0:e,x1:n,y0:i,y1:r}=t;u(H.filter(t=>{let s=X(t).getTime(),a=Y(t);return s>e&&s<n&&a>i&&a<r}))},onClick:()=>u(H),selectedBoxStyle:I,useWindowMoveEvents:!0,renderBrushHandle:t=>(0,i.jsx)(_,{...t})})]})]}),(0,i.jsx)("button",{onClick:()=>{(null==l?void 0:l.current)&&(u(H),l.current.reset())},children:"Clear"}),"\xa0",(0,i.jsx)("button",{onClick:()=>{(null==l?void 0:l.current)&&l.current.updateBrush(t=>{let e=l.current.getExtent(k.start,k.end);return{...t,start:{y:e.y0,x:e.x0},end:{y:e.y1,x:e.x1},extent:e}})},children:"Reset"})]})}},46387:(t,e,n)=>{n.d(e,{A:()=>r});var i=n(88334);function r(t,e){return new i.A({x:t.x-e.x,y:t.y-e.y})}},64255:(t,e,n)=>{n.d(e,{A:()=>l});var i=n(32988),r=n.n(i),s=n(45682),a=n(39337),o=n(6029);let h={dx:"-0.25em",dy:"0.25em",fill:"#222",fontFamily:"Arial",fontSize:10,textAnchor:"end"};function l(t){let{axisClassName:e,labelOffset:n=36,tickLength:i=8,tickLabelProps:l,...d}=t,u="function"==typeof l?l:{...h,...l};return(0,o.jsx)(s.A,{axisClassName:r()("visx-axis-left",e),labelOffset:n,orientation:a.A.left,tickLabelProps:u,tickLength:i,...d})}},65420:t=>{t.exports=JSON.parse('{"name":"@visx/demo-brush","description":"Standalone visx brush demo.","main":"index.tsx","private":true,"dependencies":{"@babel/runtime":"^7.8.4","@types/react":"^18","@types/react-dom":"^18","@visx/axis":"latest","@visx/brush":"latest","@visx/curve":"latest","@visx/gradient":"latest","@visx/group":"latest","@visx/mock-data":"latest","@visx/pattern":"latest","@visx/responsive":"latest","@visx/scale":"latest","@visx/shape":"latest","@visx/vendor":"latest","react":"^18","react-dom":"^18","react-scripts-ts":"3.1.0","typescript":"^3"},"keywords":["visualization","d3","react","visx","brush","interaction"]}')},77017:(t,e,n)=>{n.d(e,{A:()=>d});var i=n(55729),r=n(88334),s=n(46387),a=n(91088),o=n(2170);function h(t,e,n){return Math.min(Math.max(t,e),n)}function l(t,e){var n,i,r,s;let a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};if(e.length>0){let n=t,i=1/0;for(let r of e){let e=Math.sqrt((r.x-t.x)**2+(r.y-t.y)**2);e<i&&(i=e,n={x:r.x,y:r.y})}return n}return{x:h(t.x,null!=(n=a.xMin)?n:-1/0,null!=(i=a.xMax)?i:1/0),y:h(t.y,null!=(r=a.yMin)?r:-1/0,null!=(s=a.yMax)?s:1/0)}}function d(){let{resetOnStart:t=!1,snapToPointer:e=!0,onDragEnd:n,onDragMove:h,onDragStart:d,x:u,y:x,dx:g,dy:y,isDragging:c,restrict:m={},restrictToPath:p}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},v=(0,i.useRef)({x:u,y:x,dx:g,dy:y}),[M,f]=function(t){let[e,n]=(0,i.useState)(t),r=(0,i.useRef)(null),s=(0,i.useCallback)((t,e)=>{r.current=e||null,n(t)},[n]);return(0,i.useLayoutEffect)(()=>{r.current&&(r.current(e),r.current=null)},[e]),[e,s]}({x:u,y:x,dx:null!=g?g:0,dy:null!=y?y:0,isDragging:!1}),[b,w]=(0,i.useState)(new r.A({x:0,y:0}));(0,i.useEffect)(()=>{(v.current.x!==u||v.current.y!==x||v.current.dx!==g||v.current.dy!==y)&&(v.current={x:u,y:x,dx:g,dy:y},f(t=>({...t,x:u,y:x,dx:null!=g?g:0,dy:null!=y?y:0})))}),(0,i.useEffect)(()=>{void 0!==c&&M.isDragging!==c&&f(t=>({...t,isDragging:c}))},[M.isDragging,c,f]);let D=(0,i.useMemo)(()=>{if(!p)return[];let t=p.getCTM()||new DOMMatrix;return function(t,e){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1;if(!t)return[];let i=[],r=t.getTotalLength();for(let s=0;s<=r;s+=n){let n=t.getPointAtLength(s).matrixTransform(e);i.push(n)}return i}(p,t)},[null==p?void 0:p.getTotalLength()]),B=(0,i.useCallback)(n=>{n.persist(),f(i=>{let{x:a=0,y:h=0,dx:d,dy:u}=i,x=new r.A({x:(a||0)+d,y:(h||0)+u}),g=(0,o.A)(n)||new r.A({x:0,y:0}),y=l(e?g:x,D,m);return w((0,s.A)(x,g)),{isDragging:!0,dx:t?0:i.dx,dy:t?0:i.dy,x:t?y.x:y.x-i.dx,y:t?y.y:y.y-i.dy}},d&&(t=>{d({...t,event:n})}))},[d,t,m,D,f,e]),A=(0,i.useCallback)(t=>{t.persist(),f(n=>{if(!n.isDragging)return n;let{x:i=0,y:s=0}=n,h=(0,o.A)(t)||new r.A({x:0,y:0}),d=l(e?h:(0,a.A)(h,b),D,m);return{...n,dx:d.x-i,dy:d.y-s}},h&&(e=>{e.isDragging&&h({...e,event:t})}))},[f,h,e,b,D,m]),S=(0,i.useCallback)(t=>{t.persist(),f(t=>({...t,isDragging:!1}),n&&(e=>{n({...e,event:t})}))},[n,f]);return{...M,dragEnd:S,dragMove:A,dragStart:B}}},83249:(t,e,n)=>{n.d(e,{A:()=>l});var i=n(32988),r=n.n(i),s=n(45682),a=n(39337),o=n(6029);let h={dy:"0.25em",fill:"#222",fontFamily:"Arial",fontSize:10,textAnchor:"middle"};function l(t){let{axisClassName:e,labelOffset:n=8,tickLength:i=8,tickLabelProps:l,...d}=t,u="function"==typeof l?l:{...h,...l};return(0,o.jsx)(s.A,{axisClassName:r()("visx-axis-bottom",e),labelOffset:n,orientation:a.A.bottom,tickLabelProps:u,tickLength:i,...d})}},91088:(t,e,n)=>{n.d(e,{A:()=>r});var i=n(88334);function r(t,e){return new i.A({x:t.x+e.x,y:t.y+e.y})}},98752:(t,e,n)=>{n.d(e,{A:()=>s});var i=n(77017),r=n(6029);function s(t){let{captureDragArea:e=!0,snapToPointer:n=!0,children:s,dx:a,dy:o,height:h,onDragEnd:l,onDragMove:d,onDragStart:u,resetOnStart:x,width:g,x:y,y:c,isDragging:m,restrict:p,restrictToPath:v}=t,M=(0,i.A)({resetOnStart:x,snapToPointer:n,onDragEnd:l,onDragMove:d,onDragStart:u,x:y,y:c,dx:a,dy:o,isDragging:m,restrict:p,restrictToPath:v});return(0,r.jsxs)(r.Fragment,{children:[M.isDragging&&e&&(0,r.jsx)("rect",{width:g,height:h,onPointerDown:M.dragStart,onPointerMove:M.dragMove,onPointerUp:M.dragEnd,fill:"transparent"}),s(M)]})}}}]);