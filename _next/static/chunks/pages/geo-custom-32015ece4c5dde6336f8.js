_N_E=(window.webpackJsonp_N_E=window.webpackJsonp_N_E||[]).push([[106],{"09Ob":function(n,t,e){"use strict";e.r(t);var r=e("jg1C"),o=(e("ERkP"),e("6wy5")),a=e("yZzs"),i=e("FOG4");t.default=function(){return Object(r.jsx)(o.a,{events:!0,component:a.b,title:"Geo Custom",codeSandboxDirectoryName:"visx-geo-custom",packageJson:i,children:"/* eslint-disable react/jsx-handler-names */\nimport React, { useState } from 'react';\nimport * as topojson from 'topojson-client';\nimport { scaleQuantize } from '@visx/scale';\nimport { CustomProjection, Graticule } from '@visx/geo';\nimport { Projection } from '@visx/geo/lib/types';\nimport { Zoom } from '@visx/zoom';\nimport {\n  geoConicConformal,\n  geoTransverseMercator,\n  geoNaturalEarth1,\n  geoConicEquidistant,\n  geoOrthographic,\n  geoStereographic,\n} from 'd3-geo';\nimport topology from './world-topo.json';\n\nexport type GeoCustomProps = {\n  width: number;\n  height: number;\n  events?: boolean;\n};\n\ninterface FeatureShape {\n  type: 'Feature';\n  id: string;\n  geometry: { coordinates: [number, number][][]; type: 'Polygon' };\n  properties: { name: string };\n}\n\nexport const background = '#252b7e';\nconst purple = '#201c4e';\nconst PROJECTIONS: { [projection: string]: Projection } = {\n  geoConicConformal,\n  geoTransverseMercator,\n  geoNaturalEarth1,\n  geoConicEquidistant,\n  geoOrthographic,\n  geoStereographic,\n};\n\n// @ts-ignore\nconst world = topojson.feature(topology, topology.objects.units) as {\n  type: 'FeatureCollection';\n  features: FeatureShape[];\n};\n\nconst color = scaleQuantize({\n  domain: [\n    Math.min(...world.features.map((f) => f.geometry.coordinates.length)),\n    Math.max(...world.features.map((f) => f.geometry.coordinates.length)),\n  ],\n  range: [\n    '#019ece',\n    '#f4448b',\n    '#fccf35',\n    '#82b75d',\n    '#b33c88',\n    '#fc5e2f',\n    '#f94b3a',\n    '#f63a48',\n    '#dde1fe',\n    '#8993f9',\n    '#b6c8fb',\n    '#65fe8d',\n  ],\n});\n\nexport default function GeoCustom({ width, height, events = true }: GeoCustomProps) {\n  const [projection, setProjection] = useState<keyof typeof PROJECTIONS>('geoConicConformal');\n\n  const centerX = width / 2;\n  const centerY = height / 2;\n  const initialScale = (width / 630) * 100;\n\n  return width < 10 ? null : (\n    <>\n      <Zoom<SVGSVGElement>\n        width={width}\n        height={height}\n        scaleXMin={100}\n        scaleXMax={1000}\n        scaleYMin={100}\n        scaleYMax={1000}\n        initialTransformMatrix={{\n          scaleX: initialScale,\n          scaleY: initialScale,\n          translateX: centerX,\n          translateY: centerY,\n          skewX: 0,\n          skewY: 0,\n        }}\n      >\n        {(zoom) => (\n          <div className=\"container\">\n            <svg\n              width={width}\n              height={height}\n              className={zoom.isDragging ? 'dragging' : undefined}\n              ref={zoom.containerRef}\n              style={{ touchAction: 'none' }}\n            >\n              <rect x={0} y={0} width={width} height={height} fill={background} rx={14} />\n              <CustomProjection<FeatureShape>\n                projection={PROJECTIONS[projection]}\n                data={world.features}\n                scale={zoom.transformMatrix.scaleX}\n                translate={[zoom.transformMatrix.translateX, zoom.transformMatrix.translateY]}\n              >\n                {(customProjection) => (\n                  <g>\n                    <Graticule graticule={(g) => customProjection.path(g) || ''} stroke={purple} />\n                    {customProjection.features.map(({ feature, path }, i) => (\n                      <path\n                        key={`map-feature-${i}`}\n                        d={path || ''}\n                        fill={color(feature.geometry.coordinates.length)}\n                        stroke={background}\n                        strokeWidth={0.5}\n                        onClick={() => {\n                          if (events) alert(`Clicked: ${feature.properties.name} (${feature.id})`);\n                        }}\n                      />\n                    ))}\n                  </g>\n                )}\n              </CustomProjection>\n\n              {/** intercept all mouse events */}\n              <rect\n                x={0}\n                y={0}\n                width={width}\n                height={height}\n                rx={14}\n                fill=\"transparent\"\n                onTouchStart={zoom.dragStart}\n                onTouchMove={zoom.dragMove}\n                onTouchEnd={zoom.dragEnd}\n                onMouseDown={zoom.dragStart}\n                onMouseMove={zoom.dragMove}\n                onMouseUp={zoom.dragEnd}\n                onMouseLeave={() => {\n                  if (zoom.isDragging) zoom.dragEnd();\n                }}\n              />\n            </svg>\n            {events && (\n              <div className=\"controls\">\n                <button\n                  className=\"btn btn-zoom\"\n                  onClick={() => zoom.scale({ scaleX: 1.2, scaleY: 1.2 })}\n                >\n                  +\n                </button>\n                <button\n                  className=\"btn btn-zoom btn-bottom\"\n                  onClick={() => zoom.scale({ scaleX: 0.8, scaleY: 0.8 })}\n                >\n                  -\n                </button>\n                <button className=\"btn btn-lg\" onClick={zoom.reset}>\n                  Reset\n                </button>\n              </div>\n            )}\n          </div>\n        )}\n      </Zoom>\n      <label>\n        projection:{' '}\n        <select onChange={(event) => setProjection(event.target.value)}>\n          {Object.keys(PROJECTIONS).map((projectionName) => (\n            <option key={projectionName} value={projectionName}>\n              {projectionName}\n            </option>\n          ))}\n        </select>\n      </label>\n      <style jsx>{`\n        .container {\n          position: relative;\n        }\n        svg {\n          cursor: grab;\n        }\n        svg.dragging {\n          cursor: grabbing;\n        }\n        .btn {\n          margin: 0;\n          text-align: center;\n          border: none;\n          background: #dde1fe;\n          color: #222;\n          padding: 0 4px;\n          border-top: 1px solid #8993f9;\n        }\n        .btn-lg {\n          font-size: 12px;\n          line-height: 1;\n          padding: 4px;\n        }\n        .btn-zoom {\n          width: 26px;\n          font-size: 22px;\n        }\n        .btn-bottom {\n          margin-bottom: 1rem;\n        }\n        .controls {\n          position: absolute;\n          bottom: 20px;\n          right: 15px;\n          display: flex;\n          flex-direction: column;\n          align-items: flex-end;\n        }\n        label {\n          font-size: 12px;\n        }\n      `}</style>\n    </>\n  );\n}\n"})}},"3B2e":function(n,t,e){(window.__NEXT_P=window.__NEXT_P||[]).push(["/geo-custom",function(){return e("09Ob")}])},"8+kr":function(n,t,e){"use strict";e.d(t,"a",(function(){return i}));var r=e("5f3a"),o=e("uKU/"),a=e("W1cA");function i(){var n,t=0,e=1,c=1,u=[.5],s=[0,1];function l(t){return null!=t&&t<=t?s[Object(r.a)(u,t,0,c)]:n}function f(){var n=-1;for(u=new Array(c);++n<c;)u[n]=((n+1)*e-(n-c)*t)/(c+1);return l}return l.domain=function(n){return arguments.length?([t,e]=n,t=+t,e=+e,f()):[t,e]},l.range=function(n){return arguments.length?(c=(s=Array.from(n)).length-1,f()):s.slice()},l.invertExtent=function(n){var r=s.indexOf(n);return r<0?[NaN,NaN]:r<1?[t,u[0]]:r>=c?[u[c-1],e]:[u[r-1],u[r]]},l.unknown=function(t){return arguments.length?(n=t,l):l},l.thresholds=function(){return u.slice()},l.copy=function(){return i().domain([t,e]).range(s).unknown(n)},a.b.apply(Object(o.b)(l),arguments)}},HO86:function(n,t,e){"use strict";e.d(t,"a",(function(){return o}));var r=e("lEbO");function o(n,t){if(n){if("string"===typeof n)return Object(r.a)(n,t);var e=Object.prototype.toString.call(n).slice(8,-1);return"Object"===e&&n.constructor&&(e=n.constructor.name),"Map"===e||"Set"===e?Array.from(n):"Arguments"===e||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(e)?Object(r.a)(n,t):void 0}}},JmwF:function(n,t,e){"use strict";e.d(t,"a",(function(){return f}));var r=e("aWzz"),o=e.n(r),a=e("ERkP"),i=e.n(a),c=e("O94r"),u=e.n(c),s=["top","left","transform","className","children","innerRef"];function l(){return(l=Object.assign||function(n){for(var t=1;t<arguments.length;t++){var e=arguments[t];for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(n[r]=e[r])}return n}).apply(this,arguments)}function f(n){var t=n.top,e=void 0===t?0:t,r=n.left,o=void 0===r?0:r,a=n.transform,c=n.className,f=n.children,g=n.innerRef,m=function(n,t){if(null==n)return{};var e,r,o={},a=Object.keys(n);for(r=0;r<a.length;r++)e=a[r],t.indexOf(e)>=0||(o[e]=n[e]);return o}(n,s);return i.a.createElement("g",l({ref:g,className:u()("visx-group",c),transform:a||"translate("+o+", "+e+")"},m),f)}f.propTypes={top:o.a.number,left:o.a.number,transform:o.a.string,className:o.a.string,children:o.a.node,innerRef:o.a.oneOfType([o.a.string,o.a.func,o.a.object])}},Q6s3:function(n,t,e){"use strict";e.d(t,"a",(function(){return i}));var r=e("8+kr"),o=e("xx0A"),a=Object(o.b)("domain","range","reverse","nice","zero");function i(n){return a(Object(r.a)(),n)}},"VB+g":function(n,t,e){"use strict";e.d(t,"a",(function(){return c}));var r=e("rkTo"),o=e("ZQHj");function a(){return(a=Object.assign||function(n){for(var t=1;t<arguments.length;t++){var e=arguments[t];for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(n[r]=e[r])}return n}).apply(this,arguments)}var i={x:0,y:0};function c(n,t){if(!n||!t)return null;var e=function(n){if(!n)return a({},i);if(Object(o.g)(n))return n.changedTouches.length>0?{x:n.changedTouches[0].clientX,y:n.changedTouches[0].clientY}:a({},i);if(Object(o.c)(n))return{x:n.clientX,y:n.clientY};var t=null==n?void 0:n.target,e=t&&"getBoundingClientRect"in t?t.getBoundingClientRect():null;return e?{x:e.x+e.width/2,y:e.y+e.height/2}:a({},i)}(t),c=Object(o.d)(n)?n.ownerSVGElement:n,u=Object(o.e)(c)?c.getScreenCTM():null;if(Object(o.f)(c)&&u){var s=c.createSVGPoint();return s.x=e.x,s.y=e.y,s=s.matrixTransform(u.inverse()),new r.a({x:s.x,y:s.y})}var l=n.getBoundingClientRect();return new r.a({x:e.x-l.left-n.clientLeft,y:e.y-l.top-n.clientTop})}},ZQHj:function(n,t,e){"use strict";function r(n){return!!n&&n instanceof Element}function o(n){return!!n&&(n instanceof SVGElement||"ownerSVGElement"in n)}function a(n){return!!n&&"createSVGPoint"in n}function i(n){return!!n&&"getScreenCTM"in n}function c(n){return!!n&&"changedTouches"in n}function u(n){return!!n&&"clientX"in n}function s(n){return!!n&&(n instanceof Event||"nativeEvent"in n&&n.nativeEvent instanceof Event)}e.d(t,"a",(function(){return r})),e.d(t,"d",(function(){return o})),e.d(t,"f",(function(){return a})),e.d(t,"e",(function(){return i})),e.d(t,"g",(function(){return c})),e.d(t,"c",(function(){return u})),e.d(t,"b",(function(){return s}))},Zbhd:function(n,t,e){"use strict";e.d(t,"a",(function(){return c}));var r=e("PB0s"),o=e("XAd9"),a=e("Cyas"),i=e("VBI3");function c(n,t,e,c){var u,s=Object(r.c)(n,t,e);switch((c=Object(o.a)(null==c?",f":c)).type){case"s":var l=Math.max(Math.abs(n),Math.abs(t));return null!=c.precision||isNaN(u=function(n,t){return Math.max(0,3*Math.max(-8,Math.min(8,Math.floor(Object(a.a)(t)/3)))-Object(a.a)(Math.abs(n)))}(s,l))||(c.precision=u),Object(i.b)(c,l);case"":case"e":case"g":case"p":case"r":null!=c.precision||isNaN(u=function(n,t){return n=Math.abs(n),t=Math.abs(t)-n,Math.max(0,Object(a.a)(t)-Object(a.a)(n))+1}(s,Math.max(Math.abs(n),Math.abs(t))))||(c.precision=u-("e"===c.type));break;case"f":case"%":null!=c.precision||isNaN(u=function(n){return Math.max(0,-Object(a.a)(Math.abs(n)))}(s))||(c.precision=u-2*("%"===c.type))}return Object(i.a)(c)}},fGyu:function(n,t,e){"use strict";e.d(t,"a",(function(){return a}));var r=e("lEbO");var o=e("HO86");function a(n){return function(n){if(Array.isArray(n))return Object(r.a)(n)}(n)||function(n){if("undefined"!==typeof Symbol&&null!=n[Symbol.iterator]||null!=n["@@iterator"])return Array.from(n)}(n)||Object(o.a)(n)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}},jpI8:function(n,t,e){"use strict";e.d(t,"a",(function(){return a}));var r=e("VB+g"),o=e("ZQHj");function a(n,t){if(Object(o.a)(n)&&t)return Object(r.a)(n,t);if(Object(o.b)(n)){var e=n,a=e.target;if(a)return Object(r.a)(a,e)}return null}},lEbO:function(n,t,e){"use strict";function r(n,t){(null==t||t>n.length)&&(t=n.length);for(var e=0,r=new Array(t);e<t;e++)r[e]=n[e];return r}e.d(t,"a",(function(){return r}))},rkTo:function(n,t,e){"use strict";function r(n,t,e){return t in n?Object.defineProperty(n,t,{value:e,enumerable:!0,configurable:!0,writable:!0}):n[t]=e,n}e.d(t,"a",(function(){return o}));var o=function(){function n(n){var t=n.x,e=void 0===t?0:t,o=n.y,a=void 0===o?0:o;r(this,"x",0),r(this,"y",0),this.x=e,this.y=a}var t=n.prototype;return t.value=function(){return{x:this.x,y:this.y}},t.toArray=function(){return[this.x,this.y]},n}()},"uKU/":function(n,t,e){"use strict";e.d(t,"b",(function(){return c})),e.d(t,"a",(function(){return u}));var r=e("PB0s"),o=e("2+fR"),a=e("W1cA"),i=e("Zbhd");function c(n){var t=n.domain;return n.ticks=function(n){var e=t();return Object(r.a)(e[0],e[e.length-1],null==n?10:n)},n.tickFormat=function(n,e){var r=t();return Object(i.a)(r[0],r[r.length-1],null==n?10:n,e)},n.nice=function(e){null==e&&(e=10);var o,a,i=t(),c=0,u=i.length-1,s=i[c],l=i[u],f=10;for(l<s&&(a=s,s=l,l=a,a=c,c=u,u=a);f-- >0;){if((a=Object(r.b)(s,l,e))===o)return i[c]=s,i[u]=l,t(i);if(a>0)s=Math.floor(s/a)*a,l=Math.ceil(l/a)*a;else{if(!(a<0))break;s=Math.ceil(s*a)/a,l=Math.floor(l*a)/a}o=a}return n},n}function u(){var n=Object(o.b)();return n.copy=function(){return Object(o.a)(n,u())},a.b.apply(n,arguments),c(n)}}},[["3B2e",0,2,1,3,4,5,6,23,26,49]]]);