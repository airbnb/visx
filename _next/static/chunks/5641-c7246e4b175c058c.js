"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[5641],{51526:function(e,t,n){let r;n.d(t,{Oq:function(){return V},ZP:function(){return Example},or:function(){return B}});var o=n(52322),i=n(2784),a=n(72779),s=n.n(a),c=n(98926),l=n(89549),u=n(98989),d=n(63640),f=n(19616),p=n(42679),h=n(70271),v=n(23972),y=["data","className","top","left","x","y0","y1","xScale","yScale","color","keys","value","order","offset","children"];function _extends(){return(_extends=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)({}).hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(null,arguments)}function BarStack(e){var t=e.data,n=e.className,r=e.top,o=e.left,a=e.x,x=e.y0,g=void 0===x?u.l8:x,m=e.y1,b=void 0===m?u.xf:m,w=e.xScale,k=e.yScale,O=e.color,P=e.keys,S=e.value,_=e.order,j=e.offset,Z=e.children,E=function(e,t){if(null==e)return{};var n={};for(var r in e)if(({}).hasOwnProperty.call(e,r)){if(t.includes(r))continue;n[r]=e[r]}return n}(e,y),T=(0,c.Z)();P&&T.keys(P),S&&(0,f.Z)(T.value,S),_&&T.order((0,p.ZP)(_)),j&&T.offset((0,h.ZP)(j));var R=T(t),C=(0,d.Z)(w),B=R.map(function(e,t){var n=e.key;return{index:t,key:n,bars:e.map(function(t,r){var o=(k(g(t))||0)-(k(b(t))||0),i=k(b(t)),s="bandwidth"in w?w(a(t.data)):Math.max((w(a(t.data))||0)-C/2);return{bar:t,key:n,index:r,height:o,width:C,x:s||0,y:i||0,color:O(e.key,r)}})}});return Z?i.createElement(i.Fragment,null,Z(B)):i.createElement(l.Z,{className:s()("visx-bar-stack",n),top:r,left:o},B.map(function(e){return e.bars.map(function(t){return i.createElement(v.Z,_extends({key:"bar-stack-"+e.index+"-"+t.index,x:t.x,y:t.y,height:t.height,width:t.width,fill:t.color},E))})}))}var x=n(13980),g=n.n(x),m=n(62401),b=n(86363),w=["top","left","xScale","yScale","width","height","className","stroke","strokeWidth","strokeDasharray","numTicksRows","numTicksColumns","rowLineStyle","columnLineStyle","xOffset","yOffset","rowTickValues","columnTickValues"];function Grid_extends(){return(Grid_extends=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)({}).hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(null,arguments)}function Grid(e){var t=e.top,n=e.left,r=e.xScale,o=e.yScale,a=e.width,c=e.height,u=e.className,d=e.stroke,f=e.strokeWidth,p=e.strokeDasharray,h=e.numTicksRows,v=e.numTicksColumns,y=e.rowLineStyle,x=e.columnLineStyle,g=e.xOffset,k=e.yOffset,O=e.rowTickValues,P=e.columnTickValues,S=function(e,t){if(null==e)return{};var n={};for(var r in e)if(({}).hasOwnProperty.call(e,r)){if(t.includes(r))continue;n[r]=e[r]}return n}(e,w);return i.createElement(l.Z,{className:s()("visx-grid",u),top:t,left:n},i.createElement(m.Z,Grid_extends({className:u,scale:o,width:a,stroke:d,strokeWidth:f,strokeDasharray:p,numTicks:h,lineStyle:y,offset:k,tickValues:O},S)),i.createElement(b.Z,Grid_extends({className:u,scale:r,height:c,stroke:d,strokeWidth:f,strokeDasharray:p,numTicks:v,lineStyle:x,offset:g,tickValues:P},S)))}Grid.propTypes={rowTickValues:g().array,columnTickValues:g().array};var k=n(35381),O=n(52085),P=n(27069),S=n(42613),_=n(53188),j=n(27584),Z=n(68209),E=n(37409),T=n(95473),R=n(23228),C=n(9527);let B="#a44afe",V="#eaedff",G={top:40,right:0,bottom:0,left:0},N={...Z.j,minWidth:60,backgroundColor:"rgba(0,0,0,0.9)",color:"white"},W=O.Z.slice(0,12),z=Object.keys(W[0]).filter(e=>"date"!==e),D=W.reduce((e,t)=>{let n=z.reduce((e,n)=>e+=Number(t[n]),0);return e.push(n),e},[]),I=(0,j.Z1)("%Y-%m-%d"),M=(0,j.i$)("%b %d"),formatDate=e=>M(I(e)),getDate=e=>e.date,L=(0,P.Z)({domain:W.map(getDate),padding:.2}),F=(0,S.Z)({domain:[0,Math.max(...D)],nice:!0}),Y=(0,_.Z)({domain:z,range:["#6c5efb","#c998ff",B]});function Example(e){let{width:t,height:n,events:i=!1,margin:a=G}=e,{tooltipOpen:s,tooltipLeft:c,tooltipTop:u,tooltipData:d,hideTooltip:f,showTooltip:p}=(0,E.Z)(),{containerRef:h,TooltipInPortal:v}=(0,T.Z)({scroll:!0});if(t<10)return null;let y=n-a.top-100;return L.rangeRound([0,t]),F.range([y,0]),t<10?null:(0,o.jsxs)("div",{style:{position:"relative"},children:[(0,o.jsxs)("svg",{ref:h,width:t,height:n,children:[(0,o.jsx)("rect",{x:0,y:0,width:t,height:n,fill:V,rx:14}),(0,o.jsx)(Grid,{top:a.top,left:a.left,xScale:L,yScale:F,width:t,height:y,stroke:"black",strokeOpacity:.1,xOffset:L.bandwidth()/2}),(0,o.jsx)(l.Z,{top:a.top,children:(0,o.jsx)(BarStack,{data:W,keys:z,x:getDate,xScale:L,yScale:F,color:Y,children:e=>e.map(e=>e.bars.map(t=>(0,o.jsx)("rect",{x:t.x,y:t.y,height:t.height,width:t.width,fill:t.color,onClick:()=>{i&&alert("clicked: ".concat(JSON.stringify(t)))},onMouseLeave:()=>{r=window.setTimeout(()=>{f()},300)},onMouseMove:e=>{r&&clearTimeout(r);let n=(0,C.Z)(e),o=t.x+t.width/2;p({tooltipData:t,tooltipTop:null==n?void 0:n.y,tooltipLeft:o})}},"bar-stack-".concat(e.index,"-").concat(t.index))))})}),(0,o.jsx)(k.Z,{top:y+a.top,scale:L,tickFormat:formatDate,stroke:B,tickStroke:B,tickLabelProps:{fill:B,fontSize:11,textAnchor:"middle"}})]}),(0,o.jsx)("div",{style:{position:"absolute",top:a.top/2-10,width:"100%",display:"flex",justifyContent:"center",fontSize:"14px"},children:(0,o.jsx)(R.Z,{scale:Y,direction:"row",labelMargin:"0 15px 0 0"})}),s&&d&&(0,o.jsxs)(v,{top:u,left:c,style:N,children:[(0,o.jsx)("div",{style:{color:Y(d.key)},children:(0,o.jsx)("strong",{children:d.key})}),(0,o.jsxs)("div",{children:[d.bar.data[d.key],"â„‰"]}),(0,o.jsx)("div",{children:(0,o.jsx)("small",{children:formatDate(getDate(d.bar.data))})})]})]})}},41781:function(e,t,n){n.d(t,{Z:function(){return withBoundingRects}});var r=n(2784),o=n(28316);function _extends(){return(_extends=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)({}).hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(null,arguments)}function _setPrototypeOf(e,t){return(_setPrototypeOf=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}var i={top:0,right:0,bottom:0,left:0,width:0,height:0};function withBoundingRects(e){var t;return(t=function(t){function WrappedComponent(e){var n;return(n=t.call(this,e)||this).state={rect:void 0,parentRect:void 0},n.nodeRef=r.createRef(),n.getRects=n.getRects.bind(n),n}WrappedComponent.prototype=Object.create(t.prototype),WrappedComponent.prototype.constructor=WrappedComponent,_setPrototypeOf(WrappedComponent,t);var n=WrappedComponent.prototype;return n.componentDidMount=function(){var e,t=this;this.node=null!=(e=this.nodeRef)&&e.current?this.nodeRef.current:o.findDOMNode(this),this.setState(function(){return t.getRects()})},n.getRects=function(){if(!this.node)return this.state;var e=this.node,t=e.parentNode;return{rect:e.getBoundingClientRect?e.getBoundingClientRect():i,parentRect:null!=t&&t.getBoundingClientRect?t.getBoundingClientRect():i}},n.render=function(){return r.createElement(e,_extends({nodeRef:this.nodeRef,getRects:this.getRects},this.state,this.props))},WrappedComponent}(r.PureComponent)).displayName="withBoundingRects("+(e.displayName||"")+")",t}},9527:function(e,t,n){n.d(t,{Z:function(){return localPoint}});var r=n(422),o=n(47513);function localPoint(e,t){if((0,o.kK)(e)&&t)return(0,r.Z)(e,t);if((0,o.cO)(e)){var n=e.target;if(n)return(0,r.Z)(n,e)}return null}},422:function(e,t,n){n.d(t,{Z:function(){return localPoint}});var r=n(79196),o=n(47513);function _extends(){return(_extends=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)({}).hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(null,arguments)}var i={x:0,y:0};function localPoint(e,t){if(!e||!t)return null;var n=function(e){if(!e)return _extends({},i);if((0,o.z6)(e))return e.changedTouches.length>0?{x:e.changedTouches[0].clientX,y:e.changedTouches[0].clientY}:_extends({},i);if((0,o.N5)(e))return{x:e.clientX,y:e.clientY};var t=null==e?void 0:e.target,n=t&&"getBoundingClientRect"in t?t.getBoundingClientRect():null;return n?{x:n.x+n.width/2,y:n.y+n.height/2}:_extends({},i)}(t),a=(0,o.vZ)(e)?e.ownerSVGElement:e,s=(0,o.DY)(a)?a.getScreenCTM():null;if((0,o.r4)(a)&&s){var c=a.createSVGPoint();return c.x=n.x,c.y=n.y,c=c.matrixTransform(s.inverse()),new r.Z({x:c.x,y:c.y})}var l=e.getBoundingClientRect();return new r.Z({x:n.x-l.left-e.clientLeft,y:n.y-l.top-e.clientTop})}},47513:function(e,t,n){function isElement(e){return!!e&&e instanceof Element}function isSVGElement(e){return!!e&&(e instanceof SVGElement||"ownerSVGElement"in e)}function isSVGSVGElement(e){return!!e&&"createSVGPoint"in e}function isSVGGraphicsElement(e){return!!e&&"getScreenCTM"in e}function isTouchEvent(e){return!!e&&"changedTouches"in e}function isMouseEvent(e){return!!e&&"clientX"in e}function isEvent(e){return!!e&&(e instanceof Event||"nativeEvent"in e&&e.nativeEvent instanceof Event)}n.d(t,{DY:function(){return isSVGGraphicsElement},N5:function(){return isMouseEvent},cO:function(){return isEvent},kK:function(){return isElement},r4:function(){return isSVGSVGElement},vZ:function(){return isSVGElement},z6:function(){return isTouchEvent}})},23972:function(e,t,n){n.d(t,{Z:function(){return Bar}});var r=n(2784),o=n(72779),i=n.n(o),a=["className","innerRef"];function _extends(){return(_extends=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)({}).hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(null,arguments)}function Bar(e){var t=e.className,n=e.innerRef,o=function(e,t){if(null==e)return{};var n={};for(var r in e)if(({}).hasOwnProperty.call(e,r)){if(t.includes(r))continue;n[r]=e[r]}return n}(e,a);return r.createElement("rect",_extends({ref:n,className:i()("visx-bar",t)},o))}},98989:function(e,t,n){function getX(e){return"number"==typeof(null==e?void 0:e.x)?null==e?void 0:e.x:0}function getY(e){return"number"==typeof(null==e?void 0:e.y)?null==e?void 0:e.y:0}function getSource(e){return null==e?void 0:e.source}function getTarget(e){return null==e?void 0:e.target}function getFirstItem(e){return null==e?void 0:e[0]}function getSecondItem(e){return null==e?void 0:e[1]}n.d(t,{Ff:function(){return getY},U9:function(){return getTarget},b5:function(){return getSource},l8:function(){return getFirstItem},nZ:function(){return getX},xf:function(){return getSecondItem}})},63640:function(e,t,n){n.d(t,{Z:function(){return getBandwidth}});function getBandwidth(e){if("bandwidth"in e)return e.bandwidth();var t=e.range(),n=e.domain();return Math.abs(t[t.length-1]-t[0])/n.length}},95473:function(e,t,n){n.d(t,{Z:function(){return useTooltipInPortal}});var r=n(2784),o=n(731),i=n(13980),a=n.n(i),s=n(28316);function _setPrototypeOf(e,t){return(_setPrototypeOf=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}var c=function(e){function Portal(){return e.apply(this,arguments)||this}Portal.prototype=Object.create(e.prototype),Portal.prototype.constructor=Portal,_setPrototypeOf(Portal,e);var t=Portal.prototype;return t.componentWillUnmount=function(){this.node&&document.body&&(document.body.removeChild(this.node),delete this.node)},t.render=function(){return(this.node||"undefined"==typeof document||(this.node=document.createElement("div"),null!=this.props.zIndex&&(this.node.style.zIndex=""+this.props.zIndex),document.body.append(this.node)),this.node)?s.createPortal(this.props.children,this.node):null},Portal}(r.PureComponent);c.propTypes={zIndex:a().oneOfType([a().number,a().string])};var l=n(68209),u=n(89838),d=["detectBounds","zIndex"],f=["left","top","detectBounds","zIndex"];function _extends(){return(_extends=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)({}).hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(null,arguments)}function _objectWithoutPropertiesLoose(e,t){if(null==e)return{};var n={};for(var r in e)if(({}).hasOwnProperty.call(e,r)){if(t.includes(r))continue;n[r]=e[r]}return n}function useTooltipInPortal(e){var t=void 0===e?{}:e,n=t.detectBounds,i=void 0===n||n,a=t.zIndex,s=_objectWithoutPropertiesLoose(t,d),p=(0,o.Z)(s),h=p[0],v=p[1],y=p[2],x=(0,r.useState)(!1),g=x[0],m=x[1];(0,r.useEffect)(function(){m(!1)},[]);var b=(0,r.useMemo)(function(){return function(e){var t=e.left,n=e.top,o=e.detectBounds,s=e.zIndex,d=_objectWithoutPropertiesLoose(e,f),p=null==s?a:s,h=(null==o?i:o)?u.Z:l.Z,y=g?0:window.scrollX,x=g?0:window.scrollY,m=(void 0===t?0:t)+(v.left||0)+y,b=(void 0===n?0:n)+(v.top||0)+x;return r.createElement(c,{zIndex:p},r.createElement(h,_extends({left:m,top:b},d)))}},[i,a,v.left,v.top,g]);return{containerRef:h,containerBounds:v,forceRefreshBounds:y,TooltipInPortal:b}}},89838:function(e,t,n){n.d(t,{Z:function(){return d}});var r=n(13980),o=n.n(r),i=n(2784),a=n(41781),s=n(68209),c=(0,i.createContext)({isFlippedVertically:!1,isFlippedHorizontally:!1}),l=c.Provider;c.Consumer;var u=["children","getRects","left","offsetLeft","offsetTop","parentRect","rect","style","top","unstyled","nodeRef"];function _extends(){return(_extends=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)({}).hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(null,arguments)}function TooltipWithBounds(e){var t,n=e.children,r=(e.getRects,e.left),o=e.offsetLeft,a=void 0===o?10:o,c=e.offsetTop,d=void 0===c?10:c,f=e.parentRect,p=e.rect,h=e.style,v=void 0===h?s.j:h,y=e.top,x=e.unstyled,g=void 0!==x&&x,m=e.nodeRef,b=function(e,t){if(null==e)return{};var n={};for(var r in e)if(({}).hasOwnProperty.call(e,r)){if(t.includes(r))continue;n[r]=e[r]}return n}(e,u),w=!1,k=!1;if(p&&f){var O=void 0===r?0:r,P=void 0===y?0:y;if(f.width){var S=O+a+p.width-f.width,_=p.width-O-a;w=S>0&&S>_}else{var j=O+a+p.width-window.innerWidth,Z=p.width-O-a;w=j>0&&j>Z}if(f.height){var E=P+d+p.height-f.height,T=p.height-P-d;k=E>0&&E>T}else k=P+d+p.height>window.innerHeight;O=w?O-p.width-a:O+a,P=k?P-p.height-d:P+d,t="translate("+(O=Math.round(O))+"px, "+(P=Math.round(P))+"px)"}return i.createElement(s.Z,_extends({ref:m,style:_extends({left:0,top:0,transform:t},!g&&v)},b),i.createElement(l,{value:{isFlippedVertically:!k,isFlippedHorizontally:!w}},n))}TooltipWithBounds.propTypes={nodeRef:o().oneOfType([o().string,o().func,o().object])};var d=(0,a.Z)(TooltipWithBounds)},76074:function(e){e.exports=JSON.parse('{"name":"@visx/demo-barstack","description":"Standalone visx stacked bar demo.","main":"index.tsx","private":true,"dependencies":{"@babel/runtime":"^7.8.4","@types/react":"^18","@types/react-dom":"^18","@visx/axis":"latest","@visx/event":"latest","@visx/grid":"latest","@visx/group":"latest","@visx/legend":"latest","@visx/mock-data":"latest","@visx/responsive":"latest","@visx/scale":"latest","@visx/shape":"latest","@visx/tooltip":"latest","@visx/vendor":"latest","react":"^18","react-dom":"^18","react-scripts-ts":"3.1.0","typescript":"^3"},"keywords":["visualization","d3","react","visx","barstack"]}')}}]);